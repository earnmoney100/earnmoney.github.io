<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enhanced Aviator Game</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to bottom, #1e3c72, #2a5298);
      color: white;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    h1 {
      text-align: center;
      margin: 20px 0;
    }
    #left-container {
      width: 70%;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      margin: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    #right-container {
      width: 25%;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      margin: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    .plane {
      font-size: 40px;
      margin-top: 20px;
      animation: fly 1s infinite alternate;
    }
    @keyframes fly {
      from { transform: translateY(0); }
      to { transform: translateY(-10px); }
    }
    #multiplier {
      font-size: 40px;
      margin: 20px 0;
      font-weight: bold;
    }
    button {
      background-color: #ff9f43;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
      transition: 0.3s;
    }
    button:hover {
      background-color: #ff6f00;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    #balance {
      font-size: 20px;
      margin: 20px 0;
      font-weight: bold;
    }
    input {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 80px;
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    #history {
      margin-top: 20px;
      text-align: left;
    }
    #message {
      margin-top: 20px;
      padding: 10px;
      border-radius: 5px;
      font-size: 16px;
      display: none;
    }
    .success {
      background-color: rgba(50, 205, 50, 0.8);
    }
    .error {
      background-color: rgba(255, 69, 0, 0.8);
    }
    #deposit-modal, #withdraw-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
    }
    #deposit-modal button, #withdraw-modal button {
      background-color: #ff6f00;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      margin-top: 10px;
    }
    #deposit-modal button:hover, #withdraw-modal button:hover {
      background-color: #ff9f43;
    }
    #withdraw-modal input {
      width: 250px;
    }
  </style>
</head>
<body>
  <div id="left-container">
    <h1>Aviator Game</h1>
    <div id="balance">Balance: $1000</div>
    <label for="bet-input">Bet Amount: </label>
    <input id="bet-input" type="number" min="5" max="100" value="10">
    <div class="plane">✈️</div>
    <div id="multiplier">1.00x</div>
    <button id="start-btn">Start</button>
    <button id="cashout-btn" disabled>Cash Out</button>
    <div id="result"></div>
    <div id="message" class="success"></div>
    <div id="history">
      <h3>Game History (Last 5)</h3>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Bet</th>
            <th>Multiplier</th>
            <th>Result</th>
          </tr>
        </thead>
        <tbody id="history-table">
          <!-- Game history rows will be added here -->
        </tbody>
      </table>
    </div>
  </div>

  <div id="right-container">
    <h3>Banking</h3>
    <label for="deposit-input">Deposit Amount: </label>
    <input id="deposit-input" type="number" min="10" value="50">
    <button id="deposit-btn">Deposit</button>
    <br>
    <label for="withdraw-input">Withdraw Amount: </label>
    <input id="withdraw-input" type="number" min="10" value="50">
    <button id="withdraw-btn">Withdraw</button>
    <div id="banking-result"></div>
  </div>

  <!-- Modal for Deposit Address -->
  <div id="deposit-modal">
    <p>USDT (TRC20) Adresi: <strong>TEU21vUmQ27fmALcyFLwPJLZgjods3zgkw</strong></p>
    <button id="close-deposit-modal">Close</button>
  </div>

  <!-- Modal for Withdraw -->
  <div id="withdraw-modal">
    <label for="withdraw-address">USDT (TRC20) Adresiniz:</label>
    <input type="text" id="withdraw-address" placeholder="USDT Adresinizi Girin">
    <br><br>
    <label for="withdraw-amount">Çekmek İstediğiniz Miktar:</label>
    <input type="number" id="withdraw-amount" min="10" value="50">
    <br><br>
    <button id="confirm-withdraw-btn">Confirm Withdraw</button>
    <button id="close-withdraw-modal">Close</button>
  </div>

  <script>
    let balance = 1000;
let multiplier = 1.00;
let gameRunning = false;
let interval;
let gameHistory = [];
const maxHistory = 5;

const balanceDisplay = document.getElementById('balance');
const multiplierDisplay = document.getElementById('multiplier');
const startButton = document.getElementById('start-btn');
const cashoutButton = document.getElementById('cashout-btn');
const resultDisplay = document.getElementById('result');
const betInput = document.getElementById('bet-input');
const depositInput = document.getElementById('deposit-input');
const withdrawInput = document.getElementById('withdraw-input');
const depositButton = document.getElementById('deposit-btn');
const withdrawButton = document.getElementById('withdraw-btn');
const bankingResultDisplay = document.getElementById('banking-result');
const historyTable = document.getElementById('history-table');
const messageDisplay = document.getElementById('message');
const planeElement = document.querySelector('.plane');  // Uçak elementini al
const depositModal = document.getElementById('deposit-modal');
const withdrawModal = document.getElementById('withdraw-modal');
const closeDepositModalButton = document.getElementById('close-deposit-modal');
const closeWithdrawModalButton = document.getElementById('close-withdraw-modal');
const confirmWithdrawButton = document.getElementById('confirm-withdraw-btn');

function updateBalance(amount) {
  balance += amount;
  balanceDisplay.textContent = `Balance: $${balance.toFixed(2)}`;
}

function showMessage(message, type) {
  messageDisplay.textContent = message;
  messageDisplay.className = type;
  messageDisplay.style.display = 'block';
  setTimeout(() => {
    messageDisplay.style.display = 'none';
  }, 3000);
}

function addToHistory(bet, multiplier, result) {
  if (gameHistory.length >= maxHistory) {
    gameHistory.shift();
  }
  gameHistory.push({ bet, multiplier, result });
  updateHistoryTable();
}

function updateHistoryTable() {
  historyTable.innerHTML = '';
  gameHistory.forEach((entry, index) => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${index + 1}</td><td>$${entry.bet.toFixed(2)}</td><td>${entry.multiplier.toFixed(2)}x</td><td>${entry.result}</td>`;
    historyTable.appendChild(row);
  });
}

startButton.addEventListener('click', () => {
  const betAmount = parseFloat(betInput.value);
  if (isNaN(betAmount) || betAmount < 5 || betAmount > balance) {
    showMessage("Invalid bet amount.", 'error');
    return;
  }
  if (gameRunning) return;

  updateBalance(-betAmount);
  multiplier = 1.00;
  multiplierDisplay.textContent = `${multiplier.toFixed(2)}x`;
  resultDisplay.textContent = '';
  gameRunning = true;
  startButton.disabled = true;
  cashoutButton.disabled = false;
  
  // Uçak animasyonu için konum bilgisi
  let planePosition = 0; // Başlangıç pozisyonu
  planeElement.style.transform = `translateY(${planePosition}px)`; // Uçak başlangıç pozisyonunda

  interval = setInterval(() => {
    multiplier += 0.01;  // Multiplier artacak
    planePosition += 2 * multiplier;  // Uçak her artan multiplier ile daha hızlı yükselecek

    // Uçak pozisyonunu güncelle
    planeElement.style.transform = `translateY(-${planePosition}px)`;  // Yüksekliğe göre pozisyon

    // Multiplier'ı güncelle
    multiplierDisplay.textContent = `${multiplier.toFixed(2)}x`;

    // Eğer uçağın multiplier'ı %1'lik bir olasılıkla sona ererse
    if (Math.random() < 0.01 * multiplier) {
      endGame(false, betAmount);
    }

    // Uçak çok yüksek bir seviyeye ulaşırsa (örneğin 2000px) patlasın
    if (planePosition > 2000) {  // Uçak 2000px'e ulaştığında patlayacak
      endGame(false, betAmount);
    }
  }, 100);
});

cashoutButton.addEventListener('click', () => {
  if (!gameRunning) return;

  const betAmount = parseFloat(betInput.value);
  const winnings = betAmount * multiplier;
  endGame(true, winnings);
});

function endGame(cashedOut, amount) {
  gameRunning = false;
  clearInterval(interval);
  startButton.disabled = false;
  cashoutButton.disabled = true;

  if (cashedOut) {
    updateBalance(amount);
    addToHistory(amount / multiplier, multiplier, `Won $${amount.toFixed(2)}`);
    showMessage(`Cashed out at ${multiplier.toFixed(2)}x! Won $${amount.toFixed(2)}!`, 'success');
  } else {
    addToHistory(amount, multiplier, 'Lost');
    showMessage(`Plane crashed at ${multiplier.toFixed(2)}x! You lost.`, 'error');
  }
}

depositButton.addEventListener('click', () => {
  depositModal.style.display = 'block';
});

withdrawButton.addEventListener('click', () => {
  withdrawModal.style.display = 'block';
});

closeDepositModalButton.addEventListener('click', () => {
  depositModal.style.display = 'none';
});

closeWithdrawModalButton.addEventListener('click', () => {
  withdrawModal.style.display = 'none';
});

confirmWithdrawButton.addEventListener('click', () => {
  const withdrawAddress = document.getElementById('withdraw-address').value;
  const withdrawAmount = parseFloat(document.getElementById('withdraw-amount').value);

  if (withdrawAmount <= 0 || withdrawAmount > balance) {
    showMessage('Invalid withdraw amount.', 'error');
    return;
  }

  updateBalance(-withdrawAmount);
  showMessage(`Withdrawn $${withdrawAmount.toFixed(2)} to ${withdrawAddress}!`, 'success');
  withdrawModal.style.display = 'none';
});

  </script>
</body>
</html>
